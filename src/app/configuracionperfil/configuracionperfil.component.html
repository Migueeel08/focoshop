@if (!cargando && usuario) {
  <div class="perfil-container">
    <header class="perfil-header">
      <div class="logo">
        <span class="logo-text">FOCOSHOP</span>
        <i class="fa fa-shopping-cart"></i>
      </div>

      <div class="menu">
        <!-- üîπ Bot√≥n eliminar cuenta en esquina superior derecha -->
        <button (click)="abrirModalEliminar()" class="btn-eliminar-cuenta" title="Eliminar cuenta">
          <i class="fa fa-trash"></i>
        </button>
      </div>
    </header>

    <main class="perfil-content">
      <div class="perfil-grid">
        <!-- PERFIL -->
        <div class="perfil-card">
          <h3>CONFIGURACI√ìN DE PERFIL</h3>
          <div class="perfil-info">
            <img [src]="usuario.imagen || 'assets/img/avatar.png'" alt="avatar" class="avatar" />
            <p class="nombre">{{usuario.nombre}} {{usuario.apellido}}</p>
            <p>Email: {{usuario.email}}</p>
            <p>Tel√©fono: {{usuario.telefono || 'No especificado'}}</p>
          </div>
          <button (click)="editarCuenta()" class="btn-accion">EDITAR CUENTA</button>
        </div>

        <!-- DIRECCI√ìN -->
        <div class="perfil-card">
          <h3>DIRECCI√ìN DE ENV√çO</h3>
          <div class="perfil-info">
            <p><strong>{{usuario.nombre}} {{usuario.apellido}}</strong></p>
            <p>{{usuario.direccion || 'Sin direcci√≥n registrada'}}</p>
            <p>Phone Number: {{usuario.telefono || 'No disponible'}}</p>
            <p>Email: {{usuario.email}}</p>
          </div>
          <button (click)="editarDireccion()" class="btn-accion">EDITAR DIRECCI√ìN</button>
        </div>

        <!-- M√âTODO DE PAGO -->
        <div class="perfil-card">
          <h3>M√âTODO DE PAGO</h3>
          <div class="tarjeta">
            <p class="numero">NUMERO<br>{{usuario.tarjeta || '**** **** **** 0000'}}</p>
            <div class="tarjeta-footer">
              <span class="tipo">{{usuario.tipo_tarjeta || 'VISA'}}</span>
              <span class="titular">{{usuario.nombre}} {{usuario.apellido}}</span>
            </div>
          </div>
          <button (click)="editarPago()" class="btn-accion">EDITAR M√âTODO DE PAGO</button>
        </div>
      </div>

      <button (click)="volver()" class="btn-volver">VOLVER</button>
    </main>
  </div>
} @else {
  <div class="loading">
    <div class="spinner"></div>
    <p>Cargando perfil...</p>
  </div>
}

<!-- üîπ MODAL DE CONFIRMACI√ìN PARA ELIMINAR CUENTA -->
@if (mostrarModalEliminar) {
  <div class="modal-overlay" (click)="cerrarModalEliminar()">
    <div class="modal-eliminar" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <i class="fa fa-exclamation-triangle"></i>
        <h2>¬øEst√°s seguro?</h2>
      </div>
      
      <div class="modal-body">
        <p class="advertencia">
          Esta acci√≥n es <strong>irreversible</strong>. Se eliminar√°n permanentemente:
        </p>
        <ul class="lista-eliminacion">
          <li><i class="fa fa-check"></i> Tu perfil y datos personales</li>
          <li><i class="fa fa-check"></i> Historial de pedidos</li>
          <li><i class="fa fa-check"></i> Direcciones guardadas</li>
          <li><i class="fa fa-check"></i> M√©todos de pago</li>
        </ul>
        
        <div class="confirmacion-input">
          <label>Para confirmar, escribe <strong>ELIMINAR</strong> en may√∫sculas:</label>
          <input 
            type="text" 
            [(ngModel)]="textoConfirmacion"
            placeholder="Escribe ELIMINAR"
            class="input-confirmar"
            [class.error]="errorConfirmacion"
          />
          @if (errorConfirmacion) {
            <p class="mensaje-error">Debes escribir exactamente "ELIMINAR"</p>
          }
        </div>
      </div>

      <div class="modal-footer">
        <button (click)="cerrarModalEliminar()" class="btn-cancelar">
          <i class="fa fa-times"></i> Cancelar
        </button>
        <button 
          (click)="confirmarEliminacion()" 
          class="btn-confirmar-eliminar"
          [disabled]="textoConfirmacion !== 'ELIMINAR'"
        >
          <i class="fa fa-trash"></i> Eliminar mi cuenta
        </button>
      </div>
    </div>
  </div>
}